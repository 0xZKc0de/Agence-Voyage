<div class="side-panel">
  <div class="panel-header">
    <button class="btn-close" (click)="closeDetail()">
      <span class="icon">‚úï</span>
    </button>
  </div>

  <div class="loader-container" *ngIf="isLoading">
    <div class="spinner"></div>
    <p>Chargement de votre exp√©rience...</p>
  </div>

  <div class="panel-body" *ngIf="circuit && !isLoading">
    <div class="hero-image">
      <img [src]="circuit.imageUrl" [alt]="circuit.distination">
      <div class="price-badge">{{ circuit.prix | currency:'MAD ':'symbol':'1.0-0' }}</div>
    </div>

    <div class="content-wrapper">
      <h1 class="title">√âvasion √† {{ circuit.distination }}</h1>

      <div class="meta-grid">
        <div class="meta-item">
          <span class="meta-icon">‚è±Ô∏è</span>
          <div class="meta-text">
            <label>Dur√©e</label>
            <strong>{{ getDuration() }} Jours</strong>
          </div>
        </div>
        <div class="meta-item">
          <span class="meta-icon">üë•</span>
          <div class="meta-text">
            <label>Disponibilit√©</label>
            <strong>{{ circuit.nb_places }} places</strong>
          </div>
        </div>
      </div>

      <div class="section">
        <h3>√Ä propos de ce voyage</h3>
        <p class="description">{{ circuit.description }}</p>
      </div>

      <div class="itinerary-preview">
        <div class="date-card">
          <div class="date-block">
            <span>D√âPART</span>
            <strong>{{ circuit.dateDepart | date:'dd MMM' }}</strong>
          </div>
          <div class="date-arrow">‚ûî</div>
          <div class="date-block">
            <span>RETOUR</span>
            <strong>{{ circuit.dateArrive | date:'dd MMM' }}</strong>
          </div>
        </div>
      </div>

      <div class="booking-section" [class.active]="showReservationForm">
        <button class="btn-primary" (click)="toggleReservation()" *ngIf="!showReservationForm">
          R√©server cette aventure
        </button>

        <div class="booking-form" *ngIf="showReservationForm">
          <div class="form-header">
            <h3>Votre r√©servation</h3>
            <button class="btn-text" (click)="toggleReservation()">Annuler</button>
          </div>

          <div class="selector">
            <span>Nombre de voyageurs</span>
            <div class="counter">
              <button (click)="decrement()" [disabled]="participants <= 1">‚àí</button>
              <span>{{ participants }}</span>
              <button (click)="increment()" [disabled]="participants >= circuit.nb_places">+</button>
            </div>
          </div>

          <div class="total-summary">
            <div class="total-row">
              <span>Total TTC</span>
              <span class="final-price">{{ calculateTotal() | currency:'MAD ' }}</span>
            </div>
            <button class="btn-confirm">Confirmer la r√©servation</button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
