<div class="profile-container">

  <div *ngIf="successMessage" class="alert-success"
       style="padding: 15px; background: #c6f6d5; border-radius: 15px; margin-bottom: 25px; color: #22543d; font-weight: 600;">
    ‚ú® {{ successMessage }}
  </div>

  <div class="profile-wrapper" *ngIf="!isLoading && client">

    <aside class="user-sidebar">
      <div class="avatar-container">
        <div class="avatar-placeholder">
          {{ client.firstName?.charAt(0) }}{{ client.lastName?.charAt(0) }}
        </div>
      </div>
      <h2>{{ client.firstName }} {{ client.lastName }}</h2>
      <span class="role-tag">{{ client.role }}</span>

      <div style="margin-top: 30px; text-align: left; border-top: 1px solid #f0f0f0; padding-top: 20px;">
        <p style="font-size: 0.8rem; color: #a0aec0; text-transform: uppercase; font-weight: 700;">Contact</p>
        <p style="font-size: 0.9rem; margin: 5px 0;">üìß {{ client.email }}</p>
        <p style="font-size: 0.9rem;">üìû {{ client.phone }}</p>
      </div>
    </aside>

    <main class="main-content">
      <div class="content-card">
        <div class="card-header">
          <h3>Param√®tres du Profil</h3>
          <button class="btn-edit-toggle" (click)="toggleEdit()">
            {{ isEditing ? '‚ùå Annuler' : '‚úèÔ∏è Modifier le profil' }}
          </button>
        </div>

        <form [formGroup]="profileForm" (ngSubmit)="onSubmit()">
          <div class="form-grid">
            <div class="form-group">
              <label>Pr√©nom</label>
              <input type="text" formControlName="firstName" [readonly]="!isEditing" placeholder="Ex: Jean">
            </div>

            <div class="form-group">
              <label>Nom</label>
              <input type="text" formControlName="lastName" [readonly]="!isEditing" placeholder="Ex: Dupont">
            </div>

            <div class="form-group full-width">
              <label>Adresse E-mail</label>
              <input type="email" formControlName="email" readonly>
            </div>

            <div class="form-group full-width">
              <label>Num√©ro de T√©l√©phone</label>
              <input type="text" formControlName="phone" [readonly]="!isEditing">
            </div>
          </div>

          <button type="submit" class="btn-save" *ngIf="isEditing" [disabled]="!profileForm.valid">
            Enregistrer les modifications
          </button>
        </form>
      </div>

      <div class="danger-card">
        <div class="danger-info">
          <h4>S√©curit√© du compte</h4>
          <p>La suppression de votre compte est d√©finitive.</p>
        </div>
        <button class="btn-delete" (click)="deleteAccount()">Supprimer</button>
      </div>
    </main>

  </div>

  <div *ngIf="isLoading" style="text-align: center; padding: 100px;">
    <p style="color: #a38f6d; font-weight: 600;">Chargement de vos informations...</p>
  </div>

</div>
